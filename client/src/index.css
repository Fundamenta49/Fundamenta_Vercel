@import '@fontsource/lora/400.css';
@import '@fontsource/lora/700.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Onboarding tour styles */
.onboarding-target {
  position: relative;
  z-index: 55;
  animation: pulse 2s infinite;
  box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.4);
  transition: all 0.3s ease;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(var(--primary-rgb), 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(var(--primary-rgb), 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(var(--primary-rgb), 0);
  }
}

:root {
  --primary-rgb: 99, 102, 241;
}

/* Design System Colors */
:root {
  /* Section-Specific Colors */
  --emergency-color: #b91c1c;
  --financial-color: #3b82f6;
  --wellness-color: #10b981;
  --career-color: #8b5cf6;
  --learning-color: #f59e0b;
  
  /* For backward compatibility */
  --emergency-rgb: 185, 28, 28;
  --financial-rgb: 59, 130, 246;
  --wellness-rgb: 16, 185, 129;
  --career-rgb: 139, 92, 246;
  --learning-rgb: 245, 158, 11;
}

/* Legacy category colors for backward compatibility */
[data-category="finance"] {
  --primary-rgb: 34, 197, 94;
}

[data-category="career"] {
  --primary-rgb: 59, 130, 246;
}

[data-category="wellness"] {
  --primary-rgb: 168, 85, 247;
}

[data-category="learning"] {
  --primary-rgb: 249, 115, 22;
}

[data-category="fitness"] {
  --primary-rgb: 236, 72, 153;
}

[data-category="emergency"] {
  --primary-rgb: 239, 68, 68;
}

/* Custom utilities */
@layer utilities {
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer base {
  :root {
    --sidebar-width: 16rem;
    --primary: 200 27% 23%;
    --primary-foreground: 0 0% 96%;
    --background: 0 0% 96%;
    --foreground: 0 0% 18%;
    --muted: 208 26% 48%;
    --muted-foreground: 0 0% 18%;
    --card: 0 0% 96%;
    --card-foreground: 0 0% 18%;
    --accent: 177 23% 71%;
    --accent-foreground: 200 27% 23%;
    --wood: 26 19% 69%;
    --wood-light: 25 31% 75%;
    --wood-dark: 26 19% 59%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 96%;
    --border: 26 19% 69%;
    --input: 0 0% 96%;
    --ring: 208 26% 48%;
    --radius: 0.75rem;
  }

  body {
    @apply bg-texture font-serif text-navy-600;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    position: relative;
    width: 100%;
  }

  /* Add a new class for input text color */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input[type="number"],
  textarea {
    @apply text-black placeholder:text-navy-300;
  }

  main {
    flex: 1;
    padding: 1rem;
    margin-left: var(--sidebar-width);
    width: calc(100% - var(--sidebar-width));
    transition: margin-left 0.3s ease;
    overflow-x: hidden;
    max-width: 100vw;
  }

  body.sidebar-minimized {
    --sidebar-width: 5rem;
  }

  nav {
    position: fixed;
    left: 0;
    top: 0;
    height: 100vh;
    z-index: 50;
    transition: width 0.3s ease;
    background-color: #1C3D5A;
  }

  .card {
    @apply rounded-lg transition-all duration-300 p-4;
    border: 1px solid rgba(92, 64, 51, 0.1);
    background-color: #F5F5F5 !important;
    color: #2E2E2E !important;
    width: 100%;
  }

  .card:hover {
    @apply shadow-md;
    border-color: rgba(92, 64, 51, 0.2);
  }

  .tabs-container {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    padding-bottom: 0.5rem;
    margin-bottom: -0.5rem;
  }

  .tabs-container [role="tablist"] {
    display: inline-flex;
    min-width: min-content;
    gap: 1rem;
    padding: 0 0.5rem;
  }

  h1 {
    @apply text-2xl font-bold text-center mb-6;
  }

  @media (min-width: 640px) {
    h1 {
      @apply text-3xl;
    }
    .card {
      @apply p-6;
    }
  }

  .max-w-4xl {
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    padding: 0 1rem;
  }

  .bg-texture {
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.15' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.1'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-attachment: fixed;
    background-size: auto;
    background-position: center;
  }

  @media (max-width: 639px) {
    main {
      margin-left: 0;
      width: 100%;
      padding: 1rem 0.5rem;
      overflow-x: hidden;
    }
    
    .card {
      padding: 0.75rem;
    }
    
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .grid {
      grid-gap: 0.75rem;
    }
    
    [role="dialog"] {
      overflow-x: hidden;
      max-width: 100vw;
    }
  }

  .scroll-container-x::-webkit-scrollbar,
  .tabs-container::-webkit-scrollbar {
    height: 8px;
  }

  .scroll-container-x::-webkit-scrollbar-track,
  .tabs-container::-webkit-scrollbar-track {
    background: transparent;
  }

  .scroll-container-x::-webkit-scrollbar-thumb,
  .tabs-container::-webkit-scrollbar-thumb {
    background: var(--wood);
    border-radius: 4px;
  }

  .scroll-container-x::-webkit-scrollbar-thumb:hover,
  .tabs-container::-webkit-scrollbar-thumb:hover {
    background: var(--wood-light);
  }
  
  /* Fix for full-screen dialogs */
  [role="dialog"] > div {
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }
  
  /* Mobile tour modal positioning */
  .tour-modal-position {
    bottom: 0.5rem;
    right: 0.5rem;
    transform: translate(0, 0);
  }
  
  /* On small screens, make the tour modal take up most of the width */
  @media (max-width: 639px) {
    .tour-modal-position {
      left: 0.5rem !important;
      right: 0.5rem !important;
      bottom: 0.5rem !important;
      width: calc(100% - 1rem) !important;
      margin: 0 auto !important;
      transform: none !important;
    }
    
    [data-tour-dialog] {
      width: 100% !important;
      max-width: 100% !important;
    }
    
    .mobile-tour-dialog {
      position: fixed !important;
      left: 0.5rem !important;
      right: 0.5rem !important;
      bottom: 0.5rem !important;
      width: calc(100% - 1rem) !important;
      transform: none !important;
      top: auto !important;
      background-color: white !important;
      border: 1px solid rgba(0, 0, 0, 0.1) !important;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1) !important;
      border-radius: 0.5rem !important;
      height: auto !important;
      max-height: 70vh !important;
    }
    
    /* Tour active utility - when tour is active, ensure dialog is visible and properly positioned */
    body.tour-active [data-tour-dialog] {
      position: fixed !important;
      left: 0.5rem !important;
      right: 0.5rem !important;
      bottom: 1rem !important;
      width: calc(100% - 1rem) !important;
      margin: 0 auto !important;
      transform: none !important;
      top: auto !important;
      z-index: 9999 !important;
      background-color: white !important;
      border: 1px solid rgba(0, 0, 0, 0.1) !important;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1) !important;
      border-radius: 0.5rem !important;
    }
    
    /* Dialog container position for mobile */
    [data-state="open"] .fixed[role="dialog"] {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 1rem;
    }
    
    @media (min-width: 640px) {
      [data-state="open"] .fixed[role="dialog"] {
        align-items: center;
      }
    }
  }
}